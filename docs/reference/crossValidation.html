<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Cross validation (CV.Vote) for spacemap and space models. — crossValidation â€¢ spacemap</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">spacemap</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/tune_sim1.html">Model Tuning</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/topherconley/spacemap">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Cross validation (CV.Vote) for spacemap and space models.</h1>
    </div>

    
    <p>Selects and returns best-tuned model under CV.Vote.</p>
    

    <pre><span class='fu'>crossValidation</span>(<span class='no'>data</span>, <span class='no'>fold</span>, <span class='no'>trainIds</span>, <span class='no'>testIds</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"spacemap"</span>,
  <span class='st'>"space"</span>), <span class='no'>tuneGrid</span>, <span class='kw'>refit</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>data</dt>
      <dd>list containing named elements of at least X and Y. Element XY is required when <code>method = &quot;space&quot;</code>. 
X is an (N x P) matrix containing N samples and P predictor variables. 
Y is an (N X Q) matrix containing N samples and Q response variables. 
XY is an (N X (P + Q)) matrix generated by <code>cbind(X,Y)</code>.</dd>
      <dt>fold</dt>
      <dd>integer reporting the number of cross validation folds (e.g. 10)</dd>
      <dt>trainIds</dt>
      <dd>list (named optional) of size <code>fold</code> with the ith element containing 
the sample indices of corresponding to the ith training set.</dd>
      <dt>testIds</dt>
      <dd>list (named optional) of size <code>fold</code> with the ith element containing 
the sample indices of corresponding to the ith test set.</dd>
      <dt>method</dt>
      <dd>character vector reporting to fit either Spacemap or Space.</dd>
      <dt>tuneGrid</dt>
      <dd>data.frame named with columns <code>slasso, rlasso, rgroup</code> when <code>method = &quot;spacemap&quot;</code>. 
Each row in the data.frame corresponds to a tuning parameter set that is input into Spacemap. 
So the size of the tuning grid is <code>nrow(tuneGrid)</code>. When <code>method = &quot;space&quot;</code>, the previous description still applies, 
but is a data.frame with the only column being  <code>slasso</code>.</dd>
      <dt>refit</dt>
      <dd>logical telling to refit the model after convergence with either ordinary least squares or ridge regression. 
Must specify <code>refitRidge = 0.0</code> as an additional argument to indicate OLS, otherwise<code>refitRidge = 0.001</code> as a default.</dd>
      <dt>...</dt>
      <dd>Additional arguments for Spacemap and Space. For both methods specify values for <code>iter, cd_iter, tol, refitRidge</code>. 
For Space,  <code>sridge, Xindex, Yindex</code> should be specified.
Set <code>sridge = 0.0</code> unless elastic net penalty is desired.
<code>Xindex</code> are the indices of the X variables in the <code>XY</code> element of <code>data</code>. 
<code>Yindex</code> are the indices of the Y variables in the <code>XY</code> element of <code>data</code>.</dd>
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>List with elements (i) 
<code>cvFits</code> which contains the cv-selected fitted models according to cv-selection type. 
<code>tuneGrid</code> the selected tuning parameter set. 
<code>minIndices</code> the minimum CV-score index of the input tuning grid. 
<code>metricScores</code> A list of Residual sums of squares; total degrees of freedom, Partial Correlation degrees of freedom, 
Gamma degrees of freedom, and the final maximum difference between parameter estimates useful for convergence diagnostics.
 Each of these is laid out in a matrix of size (tuning grid X number of CV folds).</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## Not run: ------------------------------------</span>
<span class='co'># </span>
<span class='co'># </span>
<span class='co'># #load data</span>
<span class='co'># data(sim1)</span>
<span class='co'># dat &lt;- sim1[c("XY", "X", "Y", "Xindex", "Yindex")]</span>
<span class='co'># N &lt;- nrow(dat$X)</span>
<span class='co'># P &lt;- ncol(dat$X)</span>
<span class='co'># Q &lt;- ncol(dat$Y)</span>
<span class='co'># #set up parallel environment</span>
<span class='co'># dopar &lt;- TRUE</span>
<span class='co'># if (dopar) { </span>
<span class='co'>#  suppressPackageStartupMessages(library(doParallel))</span>
<span class='co'>#  suppressPackageStartupMessages(library(parallel))</span>
<span class='co'>#  ncores &lt;- detectCores()  - 1</span>
<span class='co'>#  cl &lt;- makeCluster(ncores)</span>
<span class='co'>#  registerDoParallel(cl)</span>
<span class='co'># }</span>
<span class='co'># </span>
<span class='co'># #set up training and test sets</span>
<span class='co'># K &lt;- 10L</span>
<span class='co'># set.seed(265616L)</span>
<span class='co'># allSets &lt;- seq_len(N)</span>
<span class='co'># library(caret)</span>
<span class='co'># testSets &lt;- caret::createFolds(allSets, k = K)</span>
<span class='co'># trainSets &lt;- lapply(testSets, function(s) setdiff(allSets, s))</span>
<span class='co'># </span>
<span class='co'># #create tuning grid for spacemap</span>
<span class='co'># tmap &lt;- expand.grid(slasso = c(65,70,73),</span>
<span class='co'>#                    rlasso = c(27,28.8, 30),</span>
<span class='co'>#                    rgroup = c(11, 12.38, 14))</span>
<span class='co'># #cross validation of spacemap</span>
<span class='co'># out &lt;- spacemap::crossValidation(dat = dat, fold = K,</span>
<span class='co'>#                                 trainIds = trainSets,  testIds = testSets, </span>
<span class='co'>#                                 method = "spacemap", tuneGrid = tmap, </span>
<span class='co'>#                                 iter = 3, tol = 1e-6, cd_iter = 1e7, </span>
<span class='co'>#                                 sridge = 0, refitRidge = 0)</span>
<span class='co'>## ---------------------------------------------</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Christopher Conley, Jie Peng, Pei Wang, UC Davis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
